(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,function(e,t,n){e.exports=n(21)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(6),l=n.n(c),i=(n(13),n(3)),o=n(1),u=n(7),s=(n(14),function(e){var t=e.ingredients,n=e.onRemoveItem;return console.log("IngredientList"),r.a.createElement("section",{className:"ingredient-list"},r.a.createElement("h2",null,"Loaded Ingredients"),r.a.createElement("ul",null,t.map(function(e){var t=e.id,a=e.title,c=e.amount;return r.a.createElement("li",{key:t,onClick:n.bind(void 0,t)},r.a.createElement("span",null,a),r.a.createElement("span",null,c,"x"))})))}),m=(n(15),function(){return r.a.createElement("div",{className:"lds-ring"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))}),d=(n(16),function(e){var t=e.children;return r.a.createElement("div",{className:"card"},t)}),E=(n(17),Object(a.memo)(function(e){var t=e.loading,n=e.onAddIngredient,c=Object(a.useState)(""),l=Object(o.a)(c,2),i=l[0],u=l[1],s=Object(a.useState)(""),E=Object(o.a)(s,2),f=E[0],b=E[1];return r.a.createElement("section",{className:"ingredient-form"},r.a.createElement(d,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n({title:i,amount:f})}},r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"title"},"Name"),r.a.createElement("input",{type:"text",id:"title",value:i,onChange:function(e){return u(e.target.value)}})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"amount"},"Amount"),r.a.createElement("input",{type:"number",id:"amount",value:f,onChange:function(e){return b(e.target.value)}})),r.a.createElement("div",{className:"ingredient-form__actions"},r.a.createElement("button",{type:"submit"},"Add Ingredient"),t&&r.a.createElement(m,null)))))})),f=(n(18),{loading:!1,error:null,data:null,extra:null,identifier:null}),b=function(e,t){switch(t.type){case"SEND_REQUEST":return{loading:!0,error:null,data:null,extra:null,identifier:t.identifier};case"RESPONSE":return Object(i.a)(Object(i.a)({},e),{},{loading:!1,data:t.responseData,extra:t.extra});case"ERROR":return{loading:!1,error:t.errorMessage};case"CLEAR":return f;default:throw new Error("Should not be reached!")}},g=function(){var e=Object(a.useReducer)(b,f),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(a.useCallback)(function(){return r({type:"CLEAR"})},[]);return[n,Object(a.useCallback)(function(e,t,n,a,c){r({type:"SEND_REQUEST",identifier:c}),fetch(e,{method:t,body:n,headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){r({type:"RESPONSE",responseData:e,extra:a})}).catch(function(e){var t=null;t="REMOVE_INGREDIENT"===c?"Removing the ingredient went wrong!":"ADD_INGREDIENT"===c?"Adding the ingredient went wrong!":e.message,r({type:"ERROR",errorMessage:t})})},[]),c]},v=(n(19),Object(a.memo)(function(e){var t=e.onClose,n=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"backdrop",onClick:t}),r.a.createElement("div",{className:"error-modal"},r.a.createElement("h2",null,"An Error Occurred!"),r.a.createElement("p",null,n),r.a.createElement("div",{className:"error-modal__actions"},r.a.createElement("button",{type:"button",onClick:t},"Okay"))))})),O=r.a.memo(function(e){var t=e.onLoadIngredients,n=Object(a.useState)(""),c=Object(o.a)(n,2),l=c[0],i=c[1],u=Object(a.useRef)(),s=g(),m=Object(o.a)(s,3),E=m[0],f=E.loading,b=E.data,O=E.error,p=m[1],h=m[2];return Object(a.useEffect)(function(){var e=setTimeout(function(){if(l===u.current.value){var e=0===l.length?"":'?orderBy="title"&equalTo="'.concat(l,'"');p("https://react-http-7aca5-default-rtdb.firebaseio.com/ingredients.json"+e,"GET")}},500);return function(){clearTimeout(e)}},[l,p,u]),Object(a.useEffect)(function(){if(!f&&!O&&b){var e=[];for(var n in b)if(Object.hasOwnProperty.call(b,n)){var a=b[n],r=a.title,c=a.amount;e.push({id:n,title:r,amount:c})}t(e)}},[b,f,O,t]),r.a.createElement("section",{className:"search"},O&&r.a.createElement(v,{onClose:h},O),r.a.createElement(d,null,r.a.createElement("div",{className:"search-input"},r.a.createElement("label",null,"Filter by Title"),f&&r.a.createElement("p",null,"Loading..."),r.a.createElement("input",{ref:u,type:"text",value:l,onChange:function(e){return i(e.target.value)}}))))}),p=function(e,t){switch(t.type){case"SET":return t.ingredients;case"ADD":return[].concat(Object(u.a)(e),[t.ingredient]);case"REMOVE":return e.filter(function(e){return e.id!==t.id});default:throw new Error("Should not get there!")}},h=function(){var e=Object(a.useReducer)(p,[]),t=Object(o.a)(e,2),n=t[0],c=t[1],l=g(),u=Object(o.a)(l,3),m=u[0],d=m.loading,f=m.data,b=m.error,h=m.extra,j=m.identifier,N=u[1],R=u[2];Object(a.useEffect)(function(){d||b||("REMOVE_INGREDIENT"===j?c({type:"REMOVE",id:h}):"ADD_INGREDIENT"===j&&c({type:"ADD",ingredient:Object(i.a)({id:f.name},h)}))},[f,h,j,d,b]);var y=Object(a.useCallback)(function(e){c({type:"SET",ingredients:e})},[]),I=Object(a.useCallback)(function(e){N("https://react-http-7aca5-default-rtdb.firebaseio.com/ingredients.json","POST",JSON.stringify(e),e,"ADD_INGREDIENT")},[N]),D=Object(a.useCallback)(function(e){N("https://react-http-7aca5-default-rtdb.firebaseio.com/ingredients/".concat(e,".json"),"DELETE",null,e,"REMOVE_INGREDIENT")},[N]),C=Object(a.useMemo)(function(){return r.a.createElement(s,{ingredients:n,onRemoveItem:D})},[n,D]);return r.a.createElement("div",{className:"App"},b&&r.a.createElement(v,{onClose:R},b),r.a.createElement(E,{loading:d,onAddIngredient:I}),r.a.createElement("section",null,r.a.createElement(O,{onLoadIngredients:y}),C))},j=Object(a.createContext)({isAuth:!1,login:function(){}}),N=function(e){var t=e.children,n=Object(a.useState)(!1),c=Object(o.a)(n,2),l=c[0],i=c[1];return r.a.createElement(j.Provider,{value:{login:function(){return i(!0)},isAuth:l}},t)},R=(n(20),function(){var e=Object(a.useContext)(j);return r.a.createElement("div",{className:"auth"},r.a.createElement(d,null,r.a.createElement("h2",null,"You are not authenticated!"),r.a.createElement("p",null,"Please log in to continue."),r.a.createElement("button",{onClick:function(){return e.login()}},"Log In")))}),y=function(){var e=Object(a.useContext)(j),t=r.a.createElement(R,null);return e.isAuth&&(t=r.a.createElement(h,null)),t};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(N,null,r.a.createElement(y,null))),document.getElementById("root"))}],[[8,1,2]]]);
//# sourceMappingURL=main.16416c0a.chunk.js.map